var game;!function(e){var t=function(t){function i(){t.call(this)}__extends(i,t);var n=(__define,i),a=n.prototype;return i.getInstance=function(){return null==this.instance&&(this.instance=new i),this.instance},a.initializeController=function(){t.prototype.initializeController.call(this),this.registerCommand(Command.START_UP,e.StartUpCommand)},a.startUp=function(e){this.sendNotification(Command.START_UP,e),this.removeCommand(Command.START_UP)},i}(puremvc.Facade);e.AppFacade=t,egret.registerClass(t,"game.AppFacade",["puremvc.IFacade","puremvc.INotifier"])}(game||(game={}));var AssetAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?n(a):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},n.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var ThemeAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getTheme=function(e,t,i,n){function a(e){t.call(n,e)}function s(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var game;!function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.addBackGround=function(){},t}(egret.Stage);e.AppContainer=t,egret.registerClass(t,"game.AppContainer")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.execute=function(e){},t}(puremvc.SimpleCommand);e.ControllerPrepCommand=t,egret.registerClass(t,"game.ControllerPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.execute=function(e){},t}(puremvc.SimpleCommand);e.ModelPrepCommand=t,egret.registerClass(t,"game.ModelPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.initializeMacroCommand=function(){this.addSubCommand(e.ControllerPrepCommand),this.addSubCommand(e.ModelPrepCommand),this.addSubCommand(e.ViewPrepCommand)},i}(puremvc.MacroCommand);e.StartUpCommand=t,egret.registerClass(t,"game.StartUpCommand")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.execute=function(t){var i=t.getBody();this.facade.registerMediator(new e.ApplicationMediator(i))},i}(puremvc.SimpleCommand);e.ViewPrepCommand=t,egret.registerClass(t,"game.ViewPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var Command=function(){function e(){}var t=(__define,e);t.prototype;return e.START_UP="startUpCommond",e}();egret.registerClass(Command,"Command");var game;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.WINSIZE_WIDTH=640,e.WINSIZE_HEIGHT=1024,e.PASS_LEVEL=8,e.GAME_NAME="眼神不好,坚持不了3步哦",e.SERVER_PATH="http://www.huhugame.com/index.php?id=100004&m=api&c=huhugame&a=",e.DEBUG_MODAL=!0,e.WEIXIN_DEBUG=!1,e.CARE_URL="http://mp.weixin.qq.com/s?__biz=MzIzMzEzNTY5MA==&mid=504974636&idx=1&sn=95e01113efed89ab29d93566d55a8d85&scene=1&srcid=0416DNjhHqtgJLQCtvmKm9ck#wechat_redirect",e}();e.Constant=t,egret.registerClass(t,"game.Constant")}(game||(game={}));var Mediator=function(){function e(){}var t=(__define,e);t.prototype;return e.LOGIN_MEDIATOR="loginMediator",e.APPLICATION_MEDIATOR="applicationMediator",e.MAINSCENE_MEDIATOR="mainSceneMediator",e.WEIXIN_MEDIATOR="weixinMediator",e.TIPS_MEDIATOR="tipsMediator",e.SHARE_MEDIATOR="shareMediator",e.GAME_MEDIATOR="GameMediator",e.GAME_OVER_MEDIATOR="GameOverMediator",e.REWARD_GIFT_MEDIATOR="GameGiftMediator",e.PLAYER_INFO_MEDIATOR="PlayerInfoMediator",e.RANK_MEDIATOR="RankMediator",e.FRIENDHELP_MEDIATOR="FriendHelpMediator",e.FRIENDHELP_SUCCESS_MEDIATOR="FriendHelpSuccessMediator",e.GAME_DESC_MEDIATOR="GameDescMedaitor",e}();egret.registerClass(Mediator,"Mediator");var Notifier=function(){function e(){}var t=(__define,e);t.prototype;return e.START_GAME="START_GAME_NOTIFIER",e.SHOW_VIEW="SHOW_VIEW",e.POP_VIEW="POP_VIEW",e.PUSH_VIEW="PUSH_VIEW",e.PRELOAD_OVER="PRELOAD_OVER",e.PLAY_GAME="PLAY_GAME",e.CLOSE_GAME="CLOSE_GAME",e.CLOSE_MAIN="CLOSE_MAIN",e.OPEN_DESC_SCENE="OPEN_DESC_SCENE",e.CLOSE_DESC="CLOSE_DESC",e.GAME_OVER="GAME_OVER",e.SHOW_GIFT="SHOW_GIFT",e.CLOSE_GIFT="CLOSE_GIFT",e.SHOW_TIPS="SHOW_TIPS",e.CLOSE_TIPS="CLOSE_TIPS",e.NO_COUNT="NO_COUNT",e.CLOSE_SHARE="CLOSE_SHARE",e.OPEN_SHARE="OPEN_SHARE",e.OPEN_REGISTER="OPEN_REGISTER",e.CLOSE_REGISTER="CLOSE_REGISTER",e.SHARE_TOQQ="SHARE_TOQQ",e.OPEN_RANK="OPEN_RANK",e.CLOSE_RANK="CLOSE_RANK",e.OPEN_FRIENDHELP="OPEN_FRIENDHELP",e.CLOSE_FRIENDHELP="CLOSE_FRIENDHELP",e.OPEN_FRIENDHELP_SUCCESS="OPEN_FRIENDHELP_SUCCESS",e.CLOSE_HELP_SUCCESS="CLOSE_HELP_SUCCESS",e}();egret.registerClass(Notifier,"Notifier");var Proxy=function(){function e(){}var t=(__define,e);t.prototype;return e.NET_PROXY="netProxy",e.WEIXIN_PROXY="weixinProxy",e.PLAYER_PROXY="playerProxy",e.AUDIO_PROXY="audioProxy",e}();egret.registerClass(Proxy,"Proxy");var game;!function(e){var t=function(e){function t(){e.call(this,t.NAME)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){var e=egret.localStorage.getItem("xsyx.sound");this.isOpen=e&&"0"===e?!1:!0,console.log("this.isOpen:"+this.isOpen)},n.closeBgMusic=function(){this.isOpen&&this.channel&&(this.channel.stop(),this.backgroundSound=null)},n.setVolice=function(e){this.moveChannel&&(this.moveChannel.volume=e)},n.startBgMusic=function(){this.isOpen&&(this.backgroundSound||(this.backgroundSound=RES.getRes("background_mp3"),this.channel&&(this.channel.stop(),this.channel=null),this.channel=this.backgroundSound.play(0,-1)))},n.openSound=function(e){if(this.isOpen=e,egret.localStorage.setItem("xsyx.sound",e?"1":"0"),e){if(this.channel)return;this.backgroundSound=RES.getRes("background_mp3"),this.channel=this.backgroundSound.play(0,-1)}else this.channel&&this.channel.stop(),this.channel=null},n.playSound=function(e){if(this.isOpen){var t=RES.getRes(e);t.play(0,1)}},n.playSoundCount=function(e,t,i){if(void 0===i&&(i=1),this.isOpen){var n=RES.getRes(e);this.moveChannel=n.play(0,t),this.moveChannel.volume=i}},t.NAME=Proxy.AUDIO_PROXY,t}(puremvc.Proxy);e.AudioProxy=t,egret.registerClass(t,"game.AudioProxy",["puremvc.IProxy","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this,t.NAME),this.callbackList=new HashMap}__extends(t,e);var i=(__define,t),n=i.prototype;return n.sendRequest=function(e,t,i){var n=new egret.URLLoader;this.callbackList.set(n.hashCode,i),n.dataFormat=egret.URLLoaderDataFormat.TEXT,n.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this);var a=new egret.URLRequest(e),s=new egret.URLRequestHeader("Access-Control-Allow-Origin","*");a.requestHeaders.push(s),a.method=t?egret.URLRequestMethod.POST:egret.URLRequestMethod.GET;var r=[];for(var o in t)r.push(o+"="+t[o]);a.data=new egret.URLVariables(r.join("&")),n.load(a)},n.sendHttpRequest=function(e,t,i){var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT},n.onPostComplete=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.COMPLETE,this.onPostComplete,this),t.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this);var i=t.data.replace(/\s/g,""),n=JSON.parse(i),a=this.callbackList.get(t.hashCode);a&&(a(n),this.callbackList.remove(t.hashCode))},n.onPostIOError=function(e){egret.error("post error : "+e)},t.NAME=Proxy.NET_PROXY,t}(puremvc.Proxy);e.NetProxy=t,egret.registerClass(t,"game.NetProxy",["puremvc.IProxy","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME),this.gameId="",this.openId="",this.isShowHelpPanel=!1,this.hid="",this.name="",this.hname="",this.realName="",this.nickName="",this.mobile="",this.avator="",this.rank=0,this.assNum=0,this.totalScore=0}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){var t=this;if(this.getPlayerData(),!e.Constant.DEBUG_MODAL){var i=e.AppFacade.getInstance().retrieveProxy(Proxy.NET_PROXY),n=e.Constant.SERVER_PATH+"get_userinfo";i.sendRequest(n,{openid:this.openId},function(e){t.playerData=e})}},a.updatePlayerData=function(t){if(!e.Constant.DEBUG_MODAL){var i=this,n=e.AppFacade.getInstance().retrieveProxy(Proxy.NET_PROXY),a=e.Constant.SERVER_PATH+"get_userinfo";n.sendRequest(a,{openid:this.openId},function(e){i.playerData=e,t&&t()})}},a.getPlayerData=function(){this.gameId=e.Utils.getURLQueryString("gameid"),this.openId=e.Utils.getURLQueryString("openid"),this.hname=e.Utils.getURLQueryString("hname"),this.hid=e.Utils.getURLQueryString("hid"),null===this.openId},a.clearHelp=function(e){this.hid="",this.hname="",e&&e()},a.updatePlayerMessage=function(t,i){if(!e.Constant.DEBUG_MODAL){t.openid=this.openId;var n=e.AppFacade.getInstance().retrieveProxy(Proxy.NET_PROXY),a=e.Constant.SERVER_PATH+"update_user",s=this;n.sendRequest(a,t,function(e){1===e.status&&(s.playerData.mobile=t.mobile,s.playerData.realname=t.realname),i&&i(),alert(e.msg)})}},a.isHelp=function(){return this.hid?!0:!1},i.NAME=Proxy.PLAYER_PROXY,i}(puremvc.Proxy);e.PlayerProxy=t,egret.registerClass(t,"game.PlayerProxy",["puremvc.IProxy","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME),this.shareServerIndex=0,this.shareServerURLArr=[e.Constant.SERVER_PATH+"share"]}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.config()},a.config=function(){var t=this.facade.retrieveProxy(Proxy.PLAYER_PROXY),i=this.facade.retrieveProxy(Proxy.NET_PROXY),n=window.wx,a=encodeURIComponent(window.location.href.split("#")[0]),s=this.shareServerURLArr[this.shareServerIndex],r={gameid:t.gameId,openid:t.openId,url:a},o=this;i.sendRequest(s,r,function(t){n.config({debug:e.Constant.WEIXIN_DEBUG,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]}),n.ready(function(){n.checkJsApi({jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"],success:function(e){o.share(t.url)}})}),n.error(function(e){o.shareServerIndex++,o.shareServerIndex>=o.shareServerURLArr.length?alert("wx.error: "+JSON.stringify(e)):o.config()})})},a.share=function(e,t){void 0===t&&(t=null),this.shareURL=e,t="心中有尺，手上有度，玩转“瀚海海尚—眼神不好坚持不了3步”，就有终极大奖等着你哦！";var i=window.wx,n={title:"坚持3步？比比你的眼力价！",desc:t,link:e,imgUrl:"https://mmbiz.qlogo.cn/mmbiz/0ay5PNUR5AUiaIFIa33h9HLnoaUia5Xyuiaz94q0UVjgNK6Ozbca3icg5oxQSRGY976RNtHfFDUQxpiav7u0IuQ7EFg/0?wx_fmt=png"},a={};for(var s in n)a[s]=n[s];a.success=function(){},i.onMenuShareTimeline(a),i.onMenuShareAppMessage(n),i.onMenuShareQQ(n),i.onMenuShareWeibo(n)},a.changeShareText=function(e){this.share(this.shareURL,e)},i.NAME=Proxy.WEIXIN_PROXY,i}(puremvc.Proxy);e.WeixinProxy=t,egret.registerClass(t,"game.WeixinProxy",["puremvc.IProxy","puremvc.INotifier"])}(game||(game={}));var HashMap=function(){function e(){this.data={}}var t=(__define,e),i=t.prototype;return i.set=function(e,t){this.data[e]=t},i.put=function(e,t){this.set(e,t)},i.get=function(e,t){return 1==arguments.length?this.data[e]:this.has(e)?this.data[e]:t},i.add=function(e,t){if(t instanceof Number){var i=this.get(e,0)+t;this.put(e,i)}},i.has=function(e){return this.data.hasOwnProperty(e)},i.remove=function(e){this.data[e]=void 0,delete this.data[e]},i.clear=function(){this.data={}},i.keys=function(){var e=[];for(var t in this.data)e.push(t);return e},i.values=function(){var e=[];for(var t in this.data)e.push(this.data[t]);return e},i.reset=function(e){e&&(this.data=e.data||e)},i.parse=function(e){if(e){var t=JSON.parse(e);this.data=t.data}},i.toString=function(){return JSON.stringify(this.data)},e}();egret.registerClass(HashMap,"HashMap");var UIUtils=function(){function e(){}var t=(__define,e);t.prototype;return e.removeFromParent=function(e){e&&e.parent&&e.parent.removeChild(e)},e.addButtonScaleEffects=function(t){if(t)if(egret.is(t,egret.getQualifiedClassName(eui.Button)))t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onButtonTouchBegan,t);else for(var i=t.numChildren,n=0;i>n;n++){var a=t.getChildAt(n);e.addButtonScaleEffects(a)}},e.onButtonTouchBegan=function(e){var t=e.target;egret.Tween.get(t).to({scaleX:.9,scaleY:.9},50).to({scaleX:1,scaleY:1},50)},e.removeButtonScaleEffects=function(t){if(t)if(egret.is(t,egret.getQualifiedClassName(eui.Button)))t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onButtonTouchBegan,t);else for(var i=t.numChildren,n=0;i>n;n++){var a=t.getChildAt(n);e.removeButtonScaleEffects(a)}},e.removeSelf=function(t){e.removeFromParent(t)},e}();egret.registerClass(UIUtils,"UIUtils");var game;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.rang=function(e,t){return Math.round(Math.random()*(t-e)+e)},e.isRang=function(e,t,i){return e>=t&&i>=e},e.limit=function(e,t,i){return Math.max(t,Math.min(i,e))},e.ang2rad=function(e){return e/180*Math.PI},e.rad2ang=function(e){return e/Math.PI*180},e.getBigNumberShow=function(e){return 1e4>e?e+"":(e/=1e3,e.toFixed(1)+"K")},e.isElinArr=function(e,t){return t.indexOf(e)>-1},e.isArrCrossing=function(t,i){for(var n=0;n<t.length;n++)if(e.isElinArr(t[n],i))return!0;return!1},e.getURLQueryString=function(e){if(egret.Capabilities.runtimeType==egret.RuntimeType.WEB){var t,i=decodeURIComponent(window.location.href);return i.indexOf("#?")>0?(i=i.replace("#?","&"),t=i.match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)"))):t=window.location.search.substr(1).match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)")),t?t[2]:null}},e.getMaxStr=function(e){return e.length<=5?e:e.substr(0,5)+"..."},e}();e.Utils=t,egret.registerClass(t,"game.Utils")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this),this.needStartAni=!0,this.width=e.Constant.WINSIZE_WIDTH,this.width=e.Constant.WINSIZE_HEIGHT,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.onAdded=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this)},a.onRemoved=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.destroy()},a.onShow=function(){var t=this.mainGroup;t?(t.y+=e.Constant.WINSIZE_HEIGHT,egret.Tween.get(t).to({y:0},200)):egret.Tween.get(this).to({scaleX:1,scaleY:1},100,egret.Ease.backOut).call(this.onShowAnimateOver,this)},a.onHide=function(t){var i=this,n=this.mainGroup;n?egret.Tween.get(n).to({y:e.Constant.WINSIZE_HEIGHT},200).call(t):egret.Tween.get(this).to({scaleX:0,scaleY:0},100,egret.Ease.backIn).call(function(){i.onHideAnimateOver(),t&&t()},this)},a.hide=function(e){this.onHide(e)},a.onHideAnimateOver=function(){},a.createChildren=function(){t.prototype.createChildren.call(this),UIUtils.addButtonScaleEffects(this),this.needStartAni&&this.onShow()},a.onShowAnimateOver=function(){},a.onTouchTap=function(e){},a.destroy=function(){this.resGroup&&RES.destroyRes(this.resGroup)},i}(eui.Panel);e.UIBaseLayer=t,egret.registerClass(t,"game.UIBaseLayer")}(game||(game={}));var game;!function(e){var t=function(t){function i(e){t.call(this),this.inGame=e,this.skinName=new DescSceneSkin}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){},a.createChildren=function(){t.prototype.createChildren.call(this),this.scroller.scrollPolicyH="off",this.enterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterBtnTouchEnded,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnTouchEnded,this),this.createStart()},a.closeBtnTouchEnded=function(){var t=this;this.hide(function(){t.inGame?(e.AppFacade.getInstance().sendNotification(Notifier.PRELOAD_OVER),e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_DESC)):e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_DESC)})},a.createStart=function(){this.mainGroup.alpha=0,egret.Tween.get(this.mainGroup).to({alpha:1},1e3)},a.enterBtnTouchEnded=function(){this.hide(function(){e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_MAIN),e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_DESC),e.AppFacade.getInstance().sendNotification(Notifier.PLAY_GAME)})},a.hide=function(e){egret.Tween.get(this.mainGroup).to({alpha:0},1e3).call(e,this)},i}(e.UIBaseLayer);e.UIDescLayer=t,egret.registerClass(t,"game.UIDescLayer")}(game||(game={}));var game;!function(e){var t=function(t){function i(e){t.call(this),this.helpData=e,this.skinName=new FriendHelpSkin}__extends(i,t);var n=(__define,i),a=n.prototype;return a.createChildren=function(){t.prototype.createChildren.call(this),this.bindTouchEvent()},a.init=function(){e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY);this.nameLabel.text=this.helpData.nickname||"",this.txImg.source=this.helpData.avatar},a.bindTouchEvent=function(){this.startBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.startBtnTouchEnd,this),this.zhuliBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.zhuliBtnTouchEnd,this)},a.startBtnTouchEnd=function(){var t=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY);t.clearHelp(function(){e.AppFacade.getInstance().sendNotification(Notifier.POP_VIEW,{popAll:!1}),e.AppFacade.getInstance().sendNotification(Notifier.PRELOAD_OVER)})},a.zhuliBtnTouchEnd=function(){this.hide(function(){e.AppFacade.getInstance().sendNotification(Notifier.POP_VIEW,{popAll:!1}),e.AppFacade.getInstance().sendNotification(Notifier.PLAY_GAME)})},i}(e.UIBaseLayer);e.UIFriendHelpLayer=t,egret.registerClass(t,"game.UIFriendHelpLayer")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this),this.stageW=0,this.stageH=0,this.stageOriginX=0,this.curStage=1,this.needFalldown=!1,this.touchBeganed=!1,this.canTouch=!0,this.score=0,this.isRunning=!1,this.playCount=0,this.needStartAni=!1,this.weixinProxy=e.AppFacade.getInstance().retrieveProxy(Proxy.WEIXIN_PROXY)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.renderUIFile(),e.AppFacade.getInstance().sendNotification(Notifier.OPEN_DESC_SCENE,{inGame:!0});var t=e.AppFacade.getInstance().retrieveProxy(Proxy.AUDIO_PROXY);t.closeBgMusic()},a.renderUIFile=function(){this.skinName=new GameSceneSkin},a.createChildren=function(){t.prototype.createChildren.call(this),this.initUI(),this.playTipsAni(),this.startCheckTimer()},a.playTipsAni=function(){this.tipsImage.alpha=0,this.tipsTween=egret.Tween.get(this.tipsImage,{loop:!0}).to({alpha:1},1e3),UIUtils.removeSelf(this.tipsImage),this.addChildAt(this.tipsImage,3001),this.screenAni=new e.WidgetScreenAni,this.screenAni.x=this.tipsImage.localToGlobal().x+.5*this.tipsImage.width,this.screenAni.y=this.tipsImage.localToGlobal().y-this.screenAni.height+.5*this.tipsImage.height,this.addChildAt(this.screenAni,3e3)},a.startCheckTimer=function(){},a.initUI=function(){this.stageW=egret.MainContext.instance.stage.stageWidth,this.stageH=egret.MainContext.instance.stage.stageHeight,this.stageOriginX=this.stageW/6,this.scoreLabel.text="x"+this.score.toString(),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegan,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnded,this),this.addStage(),this.createHero(),this.initStick()},a.onTouchMove=function(){},a.initStick=function(){this.stick1=new e.WidgetStick,this.stick1.y=this.hero.y,this.stick2=new e.WidgetStick,this.stick2.y=this.hero.y,this.addChild(this.stick2),this.addChild(this.stick1)},a.createHero=function(){this.hero=new e.HeroWidget,this.hero.y=this.stage1.y,this.addChild(this.hero),this.hero.x=this.stage1.stageImage.width*this.stage1.scaleX*.6;e.AppFacade.getInstance().retrieveProxy(Proxy.AUDIO_PROXY)},a.onTouchBegan=function(e){this.canTouch&&!this.isRunning&&(this.screenAni&&(UIUtils.removeSelf(this.screenAni),this.screenAni=null),this.tipsTween&&(egret.Tween.removeTweens(this.tipsImage),this.tipsImage.visible=!1,this.tipsTween=null),this.touchBeganed=!0,this.isRunning=!1,this.canTouch=!1,1==this.curStage?(0==this.stick1.visible&&(this.stick1.visible=!0),this.stick1.scaleY=0,this.stick1.rotation=0,this.stick1.x=this.stage1.x+.5*this.stage1.stageImage.width+this.stage1.stageImage.width*this.stage1.stageImage.scaleX*.5,this.stick1.y=this.hero.y,this.stick1.timer.start()):2==this.curStage&&(0==this.stick2.visible&&(this.stick2.visible=!0),this.stick2.scaleY=0,this.stick2.rotation=0,this.stick2.x=this.stage2.x+.5*this.stage2.stageImage.width+this.stage2.stageImage.width*this.stage2.stageImage.scaleX*.5,this.stick2.timer.start()))},a.onTouchEnded=function(){!this.isRunning&&this.touchBeganed&&(this.isRunning=!0,this.touchBeganed=!1,this.stick1.timer.running&&(this.stick1.timer.stop(),this.stick1.speed=1),this.stick2.timer.running&&(this.stick2.timer.stop(),this.stick2.speed=1),this.heroKickDone())},a.heroKickDone=function(){this.hero.heroMC.removeEventListener(egret.Event.COMPLETE,this.heroKickDone,this);var e=egret.Tween.get(this["stick"+this.curStage]);e.to({rotation:90},300),e.call(this.heroMove,this)},a.heroMove=function(){this.hero.y-=14;var t,i=0,n=0;if(1==this.curStage){var a=this.stick1.x+this.stick1.stickSprite.height*this.stick1.scaleY;t=a;var s=this.stage2.stageImage.localToGlobal().x,r=s+this.stage2.stageImage.width*this.stage2.stageImage.scaleX;a>=s&&r>=a?(i=this.stage2.x+.5*this.stage2.stageImage.width+this.stage2.stageImage.width*this.stage2.stageImage.scaleX*.5-this.hero.width,n=this.stage2.y):(i=this.stick1.x+this.stick1.stickSprite.height*this.stick1.scaleY,n=this.stick1.y,this.needFalldown=!0)}else a=this.stick2.x+this.stick2.stickSprite.height*this.stick2.scaleY,s=this.stage1.stageImage.localToGlobal().x,t=a,r=s+this.stage1.stageImage.width*this.stage1.stageImage.scaleX,a>=s&&r>=a?(i=this.stage1.x+.5*this.stage1.stageImage.width+this.stage1.stageImage.width*this.stage1.stageImage.scaleX*.5-this.hero.width,console.log(i),n=this.stage1.y):(i=this.stick2.x+this.stick2.stickSprite.height*this.stick2.scaleY,n=this.stick2.y,this.needFalldown=!0);this.hero.heroMC.movieClipData=this.hero.mcDataFactory.generateMovieClipData("walk"),this.hero.heroMC.play(-1);var o=e.AppFacade.getInstance().retrieveProxy(Proxy.AUDIO_PROXY);o.playSoundCount("move_mp3",Math.floor(t/100));var h=egret.Tween.get(this.hero);h.to({x:i},600*Math.floor(t/100)),1==this.curStage?(this.stage1.fadeFgImage(0),this.stage2.fadeFgImage(1)):(this.stage1.fadeFgImage(1),this.stage2.fadeFgImage(0)),h.call(this.heroMoveDone,this)},a.heroMoveDone=function(){if(this.giftImg.visible){this.giftImg.visible=!1,this.score++,this.scoreLabel.text="x"+this.score;var t=e.AppFacade.getInstance().retrieveProxy(Proxy.AUDIO_PROXY)}var i=this.hero;if(this.hero.y=this.stage1.y,i.heroMC.movieClipData=i.mcDataFactory.generateMovieClipData("stay"),i.heroMC.play(-1),this.needFalldown){if(1==this.curStage){var n=egret.Tween.get(this.stick1);n.to({rotation:180},300)}else if(2==this.curStage){var n=egret.Tween.get(this.stick2);n.to({rotation:180},300)}var t=e.AppFacade.getInstance().retrieveProxy(Proxy.AUDIO_PROXY);t.playSoundCount("over_mp3",1);var n=egret.Tween.get(i);return this.needFalldown=!1,n.to({y:this.stageH+i.heroSprite.height},300),void n.call(this.heroFalldown,this)}this.score++,this.scoreLabel.text="x"+this.score,this.moveStage()},a.heroFalldown=function(){this.hero.visible=!1,this.needFalldown=!1;var e=egret.Tween.get(this);e.to({x:this.x+20,y:this.y+20},100,egret.Ease.bounceOut),e.to({x:this.x-20,y:this.y-20},100,egret.Ease.bounceIn),e.to({x:this.x+20,y:this.y+20},100,egret.Ease.bounceOut),e.to({x:this.x-20,y:this.y-20},100,egret.Ease.bounceIn),e.to({x:this.x+20,y:this.y+20},100,egret.Ease.bounceOut),e.to({x:this.x-20,y:this.y-20},100,egret.Ease.bounceIn);var t=this;e.call(function(){t.x=0,t.y=0,t.showContinueTip()})},a.showContinueTip=function(){this.canTouch=!1,this.isRunning=!1,this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegan,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnded,this);var t=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY);return t.isHelp()?void e.AppFacade.getInstance().sendNotification(Notifier.OPEN_FRIENDHELP_SUCCESS,{score:this.score}):void e.AppFacade.getInstance().sendNotification(Notifier.GAME_OVER,{score:this.score})},a.moveStage=function(){var e=this.stage1,t=this.stage2,i=this.stick1,n=this.stick2,a=this.hero,s=0;1==this.curStage?s=t.x+t.stageImage.width*t.scaleX/2-this.stageOriginX:2==this.curStage&&(s=e.x+e.stageImage.width*e.scaleX/2-this.stageOriginX);var r=egret.Tween.get(i);r.to({x:i.x-s},300);var o=egret.Tween.get(n);o.to({x:n.x-s},300);var h=egret.Tween.get(e);h.to({x:e.x-s},300);var c=egret.Tween.get(t);c.to({x:t.x-s},300);var d=egret.Tween.get(a);d.to({x:a.x-s},300),d.call(this.moveStageDone,this)},a.moveStageDone=function(){1==this.curStage?(this.curStage=2,this.randomSetStage(this.stage1)):2==this.curStage&&(this.curStage=1,this.randomSetStage(this.stage2))},a.randomSetStage=function(e){var t=this.stageW,i=(this.stageOriginX,this.hero,_.random(50,99)),n=parseFloat((i/100).toFixed(2));e.stageImage.scaleX=n,e.x=t+e.stageImage.width;var a=t-e.width,s=this["stage"+this.curStage].x+e.width,r=Math.floor(_.random(s,a)),o=egret.Tween.get(e);o.to({x:r},300),o.call(this.stepOver,this)},a.checkHasGift=function(e){e||(e=1,1==this.curStage?e=2:2==this.curStage&&(e=1));var t=this["stage"+e],i=_.random(0,100);20>i&&(this.giftImg.visible=!0,this.giftImg.x=t.x,this.giftImg.y=t.y-this.giftImg.height)},a.pointContainsGift=function(){this.giftImg.visible&&this.isRunning&&this.hero.getBounds().containsRect(this.giftImg.getBounds())&&(this.giftImg.visible=!1,this.score++,this.scoreLabel.text=this.score.toString())},a.stepOver=function(){egret.Tween.removeAllTweens();var e=this;setTimeout(function(){e.canTouch=!0,e.isRunning=!1},500),this.stick1.addSpeed(),this.stick2.addSpeed(),1==this.curStage?this.checkHasGift(2):this.checkHasGift(1)},a.addStage=function(){var t=this.stageH,i=(this.stageW,new e.WidgetStage),n=new e.WidgetStage;n.fgImage.alpha=0,this.addChild(i),this.addChild(n),i.x=0,i.y=t-i.height,n.x=300,n.y=t-i.height,this.stage1=i,this.stage2=n,this.checkHasGift(2)},i}(e.UIBaseLayer);e.UIGameLayer=t,egret.registerClass(t,"game.UIGameLayer")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this),this.skinName=new GameOverSceneSkin}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(e,t){t||(t=0),this.scoreLabel.text=e.toString(),this.scoreLabel.x-=8*e.toString().length,this.rankLabel.text=t.toString(),this.rankLabel.x-=6*t.toString().length},a.createChildren=function(){t.prototype.createChildren.call(this),this.bindTouchEvent()},a.bindTouchEvent=function(){this.restartBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.restartBtnTouchEnded,this),this.friendBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.friendBtnTouchEnded,this),this.guanzhuBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.guanzhuBtnTouchEnded,this),this.homeBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.homeBtnTouchEnded,this)},a.restartBtnTouchEnded=function(){this.restartBtn.touchEnabled=!1,this.hide(function(){e.AppFacade.getInstance().sendNotification(Notifier.POP_VIEW,{popAll:!1}),e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_DESC),e.AppFacade.getInstance().sendNotification(Notifier.PLAY_GAME)})},a.friendBtnTouchEnded=function(){e.AppFacade.getInstance().sendNotification(Notifier.OPEN_SHARE)},a.guanzhuBtnTouchEnded=function(){window.open(e.Constant.CARE_URL)},a.homeBtnTouchEnded=function(){this.hide(function(){e.AppFacade.getInstance().sendNotification(Notifier.POP_VIEW,{popAll:!1}),e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_GAME),e.AppFacade.getInstance().sendNotification(Notifier.PRELOAD_OVER)})},i}(e.UIBaseLayer);e.UIGameOverLayer=t,egret.registerClass(t,"game.UIGameOverLayer")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this),this.skinName=new FrientdHelpSuccessSkin}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){var t=e.AppFacade.getInstance().retrieveMediator(Mediator.FRIENDHELP_MEDIATOR),i=t.helpData;this.nameLabel.text=i.nickname||""},a.createChildren=function(){t.prototype.createChildren.call(this),this.bindTouchEvent()},a.bindTouchEvent=function(){this.startBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.startBtnTouchEnd,this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.shareBtnTouchEnd,this)},a.startBtnTouchEnd=function(){this.hide(function(){var t=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY);t.clearHelp(function(){e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_HELP_SUCCESS),e.AppFacade.getInstance().sendNotification(Notifier.PRELOAD_OVER)})})},a.shareBtnTouchEnd=function(){e.AppFacade.getInstance().sendNotification(Notifier.OPEN_SHARE)},i}(e.UIBaseLayer);e.UIHelpSuccessLayer=t,egret.registerClass(t,"game.UIHelpSuccessLayer")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this),this.needStartAni=!1,this.skinName=new MainSceneSkin}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.playStartBtnAni()},a.playStartBtnAni=function(){egret.Tween.get(this.startBtn,{loop:!0}).to({alpha:.1},1e3).to({alpha:1},1e3)},a.playTitleGroupAni=function(){var e=this.titleGroup.y;egret.Tween.get(this.titleGroup,{loop:!0}).to({y:e-30},3e3).to({y:e},2e3)},a.createChildren=function(){t.prototype.createChildren.call(this);var i=e.AppFacade.getInstance().retrieveProxy(Proxy.AUDIO_PROXY);this.musicBtn.selected=!i.isOpen,i.openSound(i.isOpen),this.musicBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.musicBtnTouchEnded,this),this.startBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startBtnTouchEnded,this),this.descBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.descBtnTouchEnded,this),this.rankBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rankBtnTouchEnded,this)},a.startBtnTouchEnded=function(){egret.Tween.get(this.startBtn).to({rotation:1800},800).call(function(){e.AppFacade.getInstance().sendNotification(Notifier.OPEN_DESC_SCENE,{inGame:!1})})},a.descBtnTouchEnded=function(){e.AppFacade.getInstance().sendNotification(Notifier.SHOW_GIFT)},a.rankBtnTouchEnded=function(){e.AppFacade.getInstance().sendNotification(Notifier.OPEN_RANK)},a.musicBtnTouchEnded=function(){var t=e.AppFacade.getInstance().retrieveProxy(Proxy.AUDIO_PROXY);t.openSound(!this.musicBtn.selected)},i}(e.UIBaseLayer);e.UIMainLayer=t,egret.registerClass(t,"game.UIMainLayer")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this),this.skinName=new MainLoadingSkin}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.resGroup="main"},a.createChildren=function(){t.prototype.createChildren.call(this),this.sCir2.visible=this.pBg.visible=this.pFront.visible=this.logo.visible=!1,this.pTF.text="",this.gameNameLabel.text="",this.start()
},a.start=function(){this.ballDown()},a.ballDown=function(){egret.Tween.get(this.sCir1).to({y:this.sCir2.y+26},250).to({y:this.sCir2.y},50).call(this.ballExchange,this)},a.ballExchange=function(){this.sCir2.visible=!0,egret.Tween.get(this.sCir2).to({x:this.sCir2.x+30,alpha:.5},300).to({x:this.sCir2.x,alpha:1},300).call(UIUtils.removeSelf,this,[this.sCir2]),egret.Tween.get(this.sCir1).to({x:this.sCir1.x-30,alpha:.5},300).to({x:this.sCir1.x,alpha:1},300).call(this.logoGrow,this).to({scaleX:0,scaleY:0,alpha:0},200).call(UIUtils.removeSelf,this,[this.sCir1]),this.pBg.visible=!0,this.pBg.width=0,egret.Tween.get(this.pBg).to({width:400},800).call(this.beganLoadResGroup,this)},a.logoGrow=function(){this.logo.visible=!0,this.logo.scaleX=this.logo.scaleY=0,this.logo.skewX=90,egret.Tween.get(this.logo).to({scaleX:1,skewX:0},200,egret.Ease.backOut),egret.Tween.get(this.logo).to({scaleY:1},200)},a.beganLoadResGroup=function(){this.pFront.visible=!0,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(this.resGroup)},a.onResourceLoadComplete=function(e){e.groupName==this.resGroup&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.onResourceLoadOver())},a.onResourceProgress=function(t){if(t.groupName==this.resGroup){var i=t.itemsLoaded/t.itemsTotal,n=400*i;this.gameNameLabel.text=e.Constant.GAME_NAME,this.pTF.text="开启中..."+Math.floor(100*i)+"%",egret.Tween.removeTweens(this.pFront),egret.Tween.get(this.pFront).to({width:n},250,egret.Ease.sineOut)}},a.onResourceLoadOver=function(){var e=this;egret.Tween.removeTweens(this.pFront),egret.Tween.get(this.pFront).to({width:400},250,egret.Ease.sineOut).call(function(){UIUtils.removeSelf(e.pBg),e.pLabelMoveRight(),e.lineMoveRight(),e.logoJump()},this)},a.lineMoveRight=function(){this.pFront.horizontalCenter=0/0,egret.Tween.get(this.pFront).to({x:1200},50)},a.pLabelMoveRight=function(){this.pTF.horizontalCenter=0/0,egret.Tween.get(this.pTF).to({x:700,alpha:0},50),egret.Tween.get(this.gameNameLabel).to({x:700,alpha:0},50)},a.logoJump=function(){egret.Tween.get(this.logo).wait(100).to({y:this.logo.y-25},100,egret.Ease.sineOut).to({y:this.logo.y+25},50,egret.Ease.sineIn).to({y:this.logo.y-25},100,egret.Ease.sineOut).to({y:this.logo.y+25},50,egret.Ease.sineIn).call(this.removeAllElements,this)},a.removeAllElements=function(){var t=this;egret.Tween.get(this.logo).to({scaleX:0,scaleY:0},350).call(UIUtils.removeSelf,this,[this.logo]).call(function(){UIUtils.removeSelf(t),RES.destroyRes("preload"),e.AppFacade.getInstance().sendNotification(Notifier.PRELOAD_OVER)})},i}(eui.Panel);e.UIMainLoadingLayer=t,egret.registerClass(t,"game.UIMainLoadingLayer")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.skinName=new PlayerInfoSceneSkin},a.createChildren=function(){t.prototype.createChildren.call(this),this.bindTouchEvent(),this.reloadInputText(),this.phoneInputText.restrict="0-9"},a.reloadInputText=function(){var t=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY),i=t.playerData||{};this.nameInputText.text=i.realname||"",this.phoneInputText.text=i.mobile||""},a.initData=function(){this.playerProxy=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY)},a.bindTouchEvent=function(){this.enterBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.enterBtnTouchEnded,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.closeBtnTouchEnded,this)},a.closeBtnTouchEnded=function(){this.hide(function(){e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_REGISTER)})},a.enterBtnTouchEnded=function(){var t=this.nameInputText.text,i=this.phoneInputText.text;if(t&&i){var n=this,a=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY),s={realname:t.trim(),mobile:i.trim()};a.updatePlayerMessage(s,function(){n.hide(function(){e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_REGISTER),e.AppFacade.getInstance().sendNotification(Notifier.PRELOAD_OVER)})})}else{var r=e.AppFacade.getInstance().retrieveMediator(Mediator.TIPS_MEDIATOR);r.addTips("信息填写不完整")}},i}(e.UIBaseLayer);e.UIPlayerInfoLayer=t,egret.registerClass(t,"game.UIPlayerInfoLayer")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this),this.skinName=new RankListSkin}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(e){this.listData=e;var t=this;setTimeout(function(){t.mrBtnTouchEnded()},200)},a.createChildren=function(){t.prototype.createChildren.call(this),this.bindTouchEvent(),this.myDateItem.setSelf(),this.scroller.scrollPolicyH="off",this.listView.dataProvider=null,this.listView.itemRenderer=e.WidgetRankItem},a.updateView=function(e){this.listView.dataProvider=new eui.ArrayCollection(e)},a.bindTouchEvent=function(){this.enterBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.enterBtnTouchEnd,this),this.mrBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.mrBtnTouchEnded,this),this.zpmBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.zphBtnTouchEnded,this),this.zhuliBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.zhuliBtnTouchEnded,this)},a.enterBtnTouchEnd=function(){this.hide(function(){e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_RANK)})},a.zphBtnTouchEnded=function(){this.mrBtn.selected=!1,this.zpmBtn.selected=!0,this.zhuliBtn.selected=!1,this.dateGroup.visible=!0,this.zhuliGroup.visible=!1,this.updateView(this.listData.all),this.myDateItem.visible=!0,this.myDateItem.changeMyItem(this.listData.myall)},a.zhuliBtnTouchEnded=function(){this.mrBtn.selected=!1,this.zpmBtn.selected=!1,this.zhuliBtn.selected=!0,this.dateGroup.visible=!1,this.zhuliGroup.visible=!0,this.updateView(this.listData.help),this.myDateItem.visible=!1,this.myDateItem.changeMyItem(this.listData.myrank)},a.mrBtnTouchEnded=function(){this.mrBtn.selected=!0,this.zpmBtn.selected=!1,this.zhuliBtn.selected=!1,this.dateGroup.visible=!0,this.zhuliGroup.visible=!1,this.myDateItem.visible=!0,this.updateView(this.listData.day),this.myDateItem.changeMyItem(this.listData.myday)},i}(e.UIBaseLayer);e.UIRankLayer=t,egret.registerClass(t,"game.UIRankLayer")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this),this.skinName=new GiftLayerSkin}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){var t=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY),i=t.playerData||{};i.nickname?this.nameLabel.text=e.Utils.getMaxStr(i.nickname):this.nameLabel.text="",this.touxiangImg.source=i.avatar,this.rankLabel.text=i.rank||0,this.zhuliLabel.text=i.ass_num||0,this.scoreLabel.text=i.total_score||0},a.createChildren=function(){t.prototype.createChildren.call(this),this.bindTouchEvent()},a.bindTouchEvent=function(){this.enterBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.enterBtnTouchEnded,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.closeBtnTouchEnded,this)},a.closeBtnTouchEnded=function(){this.hide(function(){e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_GIFT)})},a.enterBtnTouchEnded=function(){e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY);this.hide(function(){e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_GIFT),e.AppFacade.getInstance().sendNotification(Notifier.OPEN_REGISTER)})},i}(e.UIBaseLayer);e.UIRewardLayer=t,egret.registerClass(t,"game.UIRewardLayer")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.renderUIFile()},a.renderUIFile=function(){this.skinName=new ShareSceneSkin},a.createChildren=function(){t.prototype.createChildren.call(this)},a.onTouchTap=function(){this.hide(function(){e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_SHARE)})},i}(e.UIBaseLayer);e.UIShareLayer=t,egret.registerClass(t,"game.UIShareLayer")}(game||(game={}));var game;!function(e){var t=function(t){function i(e){t.call(this,i.NAME,e),this.viewStack=[],this.registerMediators(),this.registerProxys()}__extends(i,t);var n=__define,a=i,s=a.prototype;return s.registerMediators=function(){this.facade.registerMediator(new e.LoginMediator),this.facade.registerMediator(new e.MainSceneMediator),this.facade.registerMediator(new e.TipsMediator),this.facade.registerMediator(new e.ShareMediator),this.facade.registerMediator(new e.GameMediator),this.facade.registerMediator(new e.GameOverMediator),this.facade.registerMediator(new e.RewardGiftMediator),this.facade.registerMediator(new e.PlayerInfoMediator),this.facade.registerMediator(new e.FriendHelpMediator),this.facade.registerMediator(new e.RankMediator),this.facade.registerMediator(new e.GameDescMediator),this.facade.registerMediator(new e.FriendHelpSuccessMediator)},s.registerProxys=function(){var t=[e.NetProxy,e.PlayerProxy,e.WeixinProxy,e.AudioProxy],i=this;_.forEach(t,function(e,n){var a=new t[n];i.facade.registerProxy(a),a&&a.init&&a.init()})},n(s,"main",function(){return this.viewComponent}),s.listNotificationInterests=function(){return[Notifier.SHOW_VIEW,Notifier.PUSH_VIEW,Notifier.POP_VIEW]},s.handleNotification=function(e){switch(e.getName()){case Notifier.SHOW_VIEW:this.showView(e.getBody());break;case Notifier.PUSH_VIEW:this.pushView(e.getBody());break;case Notifier.POP_VIEW:this.popView(e.getBody())}},s.pushView=function(e){var t=this.viewStack[0];if(t){var i=this.facade.retrieveMediator(t.name);if(i&&i.onPushView)i.onPushView();else if(i&&i.viewComponent){if(i.viewComponent.parent){var n=i.viewComponent.parent;n.removeChild(i.viewComponent)}i.viewComponent=null}}this.showView(e),this.viewStack.unshift(e)},s.popView=function(e){var t=e.popAll;t=t?!0:!1;do if(!this.popOne())break;while(t);var i=this.viewStack[0];if(i){var n=this.facade.retrieveMediator(i.name);this.showView(i),n&&n.onRestoreView&&n.onRestoreView()}},s.popOne=function(){var e=this.viewStack.shift();if(!e)return!1;var t=this.facade.retrieveMediator(e.name);if(t)if(t.onPopView)t.onPopView();else if(t.viewComponent){if(t.viewComponent.parent){var i=t.viewComponent.parent;i.removeChild(t.viewComponent)}t.viewComponent=null}return this.viewStack.length},s.showView=function(e){var t,i=this,n=this.facade.retrieveMediator(e.name);e.parent instanceof String&&(i=this.facade.retrieveMediator(e.parent)),n.getRes&&(t=n.getRes());var a=function(){n.init&&n.init(e);var t=n.getViewComponent();i.getViewComponent().addChild(t,e.zOrder||0)};a()},i.NAME=Mediator.APPLICATION_MEDIATOR,i}(puremvc.Mediator);e.ApplicationMediator=t,egret.registerClass(t,"game.ApplicationMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME),this.isShowHelp=!1}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.viewComponent=new e.UIFriendHelpLayer(this.helpData),this.viewComponent.init()},a.listNotificationInterests=function(){return[Notifier.OPEN_FRIENDHELP,Notifier.CLOSE_FRIENDHELP]},a.handleNotification=function(t){switch(t.getName()){case Notifier.OPEN_FRIENDHELP:if(this.isShowHelp)return;this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null);var n=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY),a=this;if(n.hid){var s=e.AppFacade.getInstance().retrieveProxy(Proxy.NET_PROXY),r=e.Constant.SERVER_PATH+"get_userinfo";s.sendRequest(r,{openid:n.hid},function(e){a.helpData=e,a.facade.sendNotification(Notifier.PUSH_VIEW,{name:i.NAME}),a.isShowHelp=!0})}break;case Notifier.CLOSE_FRIENDHELP:this.viewComponent&&(UIUtils.removeFromParent(this.viewComponent),this.viewComponent=null)}},i.NAME=Mediator.FRIENDHELP_MEDIATOR,i}(puremvc.Mediator);e.FriendHelpMediator=t,egret.registerClass(t,"game.FriendHelpMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.countUserResult=function(){var t=e.AppFacade.getInstance().retrieveProxy(Proxy.NET_PROXY),n=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY),a={gameid:n.gameId,openid:n.openId,hid:n.hid,score:this.score},s=this,r=(n.playerData,e.Constant.SERVER_PATH+"ass_score");t.sendRequest(r,a,function(e){s.facade.sendNotification(Notifier.SHOW_VIEW,{name:i.NAME})})},a.init=function(){this.viewComponent=new e.UIHelpSuccessLayer,this.viewComponent.init()},a.listNotificationInterests=function(){return[Notifier.OPEN_FRIENDHELP_SUCCESS,Notifier.CLOSE_HELP_SUCCESS]},a.handleNotification=function(t){switch(t.getName()){case Notifier.OPEN_FRIENDHELP_SUCCESS:if(this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null),this.score=t.getBody().score,!e.Constant.DEBUG_MODAL){this.countUserResult()}break;case Notifier.CLOSE_HELP_SUCCESS:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null)}},i.NAME=Mediator.FRIENDHELP_SUCCESS_MEDIATOR,i}(puremvc.Mediator);e.FriendHelpSuccessMediator=t,egret.registerClass(t,"game.FriendHelpSuccessMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.viewComponent=new e.UIDescLayer(this.inGame),this.viewComponent.init()},a.listNotificationInterests=function(){return[Notifier.OPEN_DESC_SCENE,Notifier.CLOSE_DESC]},a.handleNotification=function(e){switch(e.getName()){case Notifier.OPEN_DESC_SCENE:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null),this.inGame=e.getBody().inGame,this.facade.sendNotification(Notifier.SHOW_VIEW,{name:i.NAME});break;case Notifier.CLOSE_DESC:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null)}},i.NAME=Mediator.GAME_DESC_MEDIATOR,i}(puremvc.Mediator);e.GameDescMediator=t,egret.registerClass(t,"game.GameDescMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.viewComponent=new e.UIGameLayer,this.viewComponent.init()},a.listNotificationInterests=function(){return[Notifier.PLAY_GAME,Notifier.CLOSE_GAME]},a.handleNotification=function(e){switch(e.getName()){case Notifier.PLAY_GAME:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null),this.facade.sendNotification(Notifier.SHOW_VIEW,{name:i.NAME});break;case Notifier.CLOSE_GAME:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null)}},i.NAME=Mediator.GAME_MEDIATOR,i}(puremvc.Mediator);e.GameMediator=t,egret.registerClass(t,"game.GameMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME),this.score=0,this.rank=999}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.viewComponent=new e.UIGameOverLayer,this.viewComponent.init(this.score,this.rank)},a.listNotificationInterests=function(){return[Notifier.GAME_OVER]},a.countUserResult=function(){var t=e.AppFacade.getInstance().retrieveProxy(Proxy.NET_PROXY),n=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY),a={gameid:n.gameId,openid:n.openId,score:this.score},s=this,r=(n.playerData,e.Constant.SERVER_PATH+"score");t.sendRequest(r,a,function(e){s.rank=e.rank,s.facade.sendNotification(Notifier.PUSH_VIEW,{name:i.NAME})})},a.handleNotification=function(t){switch(t.getName()){case Notifier.GAME_OVER:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null);var n=this;if(this.score=t.getBody().score,e.Constant.DEBUG_MODAL)return void n.facade.sendNotification(Notifier.PUSH_VIEW,{name:i.NAME});this.countUserResult()}},i.NAME=Mediator.GAME_OVER_MEDIATOR,i}(puremvc.Mediator);e.GameOverMediator=t,egret.registerClass(t,"game.GameOverMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME)}__extends(i,t);var n=__define,a=i,s=a.prototype;return s.init=function(){this.viewComponent=new e.UIMainLoadingLayer,this.viewComponent.init()},s.listNotificationInterests=function(){return[Notifier.START_GAME]},s.handleNotification=function(e){switch(e.getName()){case Notifier.START_GAME:;this.facade.sendNotification(Notifier.SHOW_VIEW,{name:i.NAME})}},n(s,"loginViewComponent",function(){return this.viewComponent}),i.NAME=Mediator.LOGIN_MEDIATOR,i}(puremvc.Mediator);e.LoginMediator=t,egret.registerClass(t,"game.LoginMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.viewComponent=new e.UIMainLayer,this.viewComponent.init()},a.listNotificationInterests=function(){return[Notifier.PRELOAD_OVER,Notifier.CLOSE_MAIN]},a.handleNotification=function(t){switch(t.getName()){case Notifier.PRELOAD_OVER:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null);var n=e.AppFacade.getInstance().retrieveProxy(Proxy.AUDIO_PROXY);n.startBgMusic(),this.facade.sendNotification(Notifier.SHOW_VIEW,{name:i.NAME});var a=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY);a&&a.isHelp()&&e.AppFacade.getInstance().sendNotification(Notifier.OPEN_FRIENDHELP);break;case Notifier.CLOSE_MAIN:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null)}},i.NAME=Mediator.MAINSCENE_MEDIATOR,i}(puremvc.Mediator);e.MainSceneMediator=t,egret.registerClass(t,"game.MainSceneMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.viewComponent=new e.UIPlayerInfoLayer,this.viewComponent.init()},a.listNotificationInterests=function(){return[Notifier.OPEN_REGISTER,Notifier.CLOSE_REGISTER]},a.handleNotification=function(e){switch(e.getName()){case Notifier.OPEN_REGISTER:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null),this.facade.sendNotification(Notifier.SHOW_VIEW,{name:i.NAME});break;case Notifier.CLOSE_REGISTER:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null)}},i.NAME=Mediator.PLAYER_INFO_MEDIATOR,i}(puremvc.Mediator);e.PlayerInfoMediator=t,egret.registerClass(t,"game.PlayerInfoMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.viewComponent=new e.UIRankLayer,this.viewComponent.init(this.listData)},a.listNotificationInterests=function(){return[Notifier.OPEN_RANK,Notifier.CLOSE_RANK]},a.handleNotification=function(t){switch(t.getName()){case Notifier.OPEN_RANK:this.viewComponent?(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null):e.Constant.DEBUG_MODAL?this.facade.sendNotification(Notifier.SHOW_VIEW,{name:i.NAME,zOrder:20}):this.getRankList();break;case Notifier.CLOSE_RANK:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null)}},a.getRankList=function(){var t=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY),n=e.AppFacade.getInstance().retrieveProxy(Proxy.NET_PROXY),a={gameid:t.gameId,openid:t.openId},s=e.Constant.SERVER_PATH+"ranking",r=this;n.sendRequest(s,a,function(e){r.listData=e,r.facade.sendNotification(Notifier.SHOW_VIEW,{name:i.NAME,zOrder:20})})},i.NAME=Mediator.RANK_MEDIATOR,i}(puremvc.Mediator);e.RankMediator=t,egret.registerClass(t,"game.RankMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.viewComponent=new e.UIRewardLayer,this.viewComponent.init()},a.listNotificationInterests=function(){return[Notifier.SHOW_GIFT,Notifier.CLOSE_GIFT]},a.handleNotification=function(t){switch(t.getName()){case Notifier.SHOW_GIFT:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null);var n=this,a=e.AppFacade.getInstance().retrieveProxy(Proxy.PLAYER_PROXY);if(e.Constant.DEBUG_MODAL)return void n.facade.sendNotification(Notifier.SHOW_VIEW,{name:i.NAME,zOrder:20});a.updatePlayerData(function(){n.facade.sendNotification(Notifier.SHOW_VIEW,{name:i.NAME,zOrder:20})});break;case Notifier.CLOSE_GIFT:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null)}},i.NAME=Mediator.REWARD_GIFT_MEDIATOR,i}(puremvc.Mediator);e.RewardGiftMediator=t,egret.registerClass(t,"game.RewardGiftMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME)}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.viewComponent=new e.UIShareLayer,this.viewComponent.init()},a.listNotificationInterests=function(){return[Notifier.OPEN_SHARE,Notifier.CLOSE_SHARE]},a.handleNotification=function(e){switch(e.getName()){case Notifier.OPEN_SHARE:this.viewComponent&&(UIUtils.removeSelf(this.viewComponent),this.viewComponent=null),this.facade.sendNotification(Notifier.SHOW_VIEW,{name:i.NAME});break;case Notifier.CLOSE_SHARE:this.viewComponent&&UIUtils.removeFromParent(this.viewComponent),this.viewComponent=null}},i.NAME=Mediator.SHARE_MEDIATOR,i}(puremvc.Mediator);e.ShareMediator=t,egret.registerClass(t,"game.ShareMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this,i.NAME),this.tipsInterval=null,this.tipsWaiting=null,this.runningTips=null}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.viewComponent=new e.UITips(this.runningTips),this.viewComponent.init()},a.onRegister=function(){t.prototype.onRegister.call(this),this.startInterVal(),this.tipsWaiting=[]},a.listNotificationInterests=function(){return[Notifier.SHOW_TIPS,Notifier.CLOSE_TIPS]},a.handleNotification=function(e){switch(e.getName()){case Notifier.SHOW_TIPS:var t=e.getBody().tips;this.tipsWaiting||(this.tipsWaiting=[]),this.tipsWaiting.push(t),this.tipsInterval||this.startInterVal();break;case Notifier.CLOSE_TIPS:this.runningTips=null,this.viewComponent&&(UIUtils.removeFromParent(this.viewComponent),this.viewComponent=null)}},a.startInterVal=function(){var e=this;this.tipsInterval=setInterval(function(){e.checkHasTips()},100)},a.addTips=function(e){this.sendNotification(Notifier.SHOW_TIPS,{tips:e})},a.checkHasTips=function(){if(!this.runningTips){if(!this.tipsWaiting||this.tipsWaiting.length<1)return clearInterval(this.tipsInterval),void(this.tipsInterval=null);this.runningTips=this.tipsWaiting.shift(),this.sendNotification(Notifier.SHOW_VIEW,{name:i.NAME,zOrder:1e4})}},i.NAME=Mediator.TIPS_MEDIATOR,i}(puremvc.Mediator);e.TipsMediator=t,egret.registerClass(t,"game.TipsMediator",["puremvc.IMediator","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(e){t.call(this),this.time=1e3,this.tipsText=e}__extends(i,t);var n=(__define,i),a=n.prototype;return a.init=function(){this.renderUIFile()},a.renderUIFile=function(){this.skinName=new TipsSkin},a.createChildren=function(){t.prototype.createChildren.call(this),this.tipsContent.text=this.tipsText,setTimeout(function(){e.AppFacade.getInstance().sendNotification(Notifier.CLOSE_TIPS)},this.time)},i}(e.UIBaseLayer);e.UITips=t,egret.registerClass(t,"game.UITips")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){var e=2,t=new egret.Bitmap;t.texture=RES.getRes("hero0"+e+"_png"),this.heroSprite=t;var i=RES.getRes("hero"+e+"_json"),n=RES.getRes("hero"+e+"_png"),a=new egret.MovieClipDataFactory(i,n),s=new egret.MovieClip(a.generateMovieClipData("stay"));this.addChild(s),s.play(-1),this.anchorOffsetX=0,this.anchorOffsetY=t.height/2,this.mcDataFactory=a,this.heroMC=s},t}(egret.Sprite);e.HeroWidget=t,egret.registerClass(t,"game.HeroWidget")}(game||(game={}));var game;!function(e){var t=function(t){function i(){t.call(this),this.isSelf=!1,this.skinName=new WidgetRankListItemSkin,this.rankImage.x-=10}__extends(i,t);var n=(__define,i),a=n.prototype;return a.setSelf=function(){this.rankItemBg.source=RES.getRes("img_rankmine_png"),this.zhuliNameLabel.textColor=9764745,this.zhuliScoreLabel.textColor=9764745,this.nameLabel.textColor=9764745,this.scoreLabel.textColor=9764745,this.helpLabel.textColor=9764745},a.dataChanged=function(){this.updateShow(this.data)},a.changeMyItem=function(t){t.rank?(this.zhuliGroup.visible=!1,this.ptGroup.visible=!0,parseInt(t.rank)<=4?(this.rankLabel.text="",this.rankImage.visible=!0,this.rankImage.source=RES.getRes("rank"+t.rank+"_png")):(this.rankLabel.text=t.rank,this.rankImage.visible=!1),this.nameLabel.text=e.Utils.getMaxStr(t.nickname.toString()),this.scoreLabel.text=t.total_score||"0",this.helpLabel.text=t.ass_num||"0"):(this.zhuliGroup.visible=!0,this.ptGroup.visible=!1,this.zhuliNameLabel.text=e.Utils.getMaxStr(t.nickname),this.zhuliScoreLabel.text=t.ass_score||"0",this.zhuliCountLabel.text=t.ass_num||"0")},a.updateShow=function(t){t.id?(this.zhuliGroup.visible=!1,this.ptGroup.visible=!0,parseInt(t.id)<=4?(this.rankLabel.text="",this.rankImage.visible=!0,this.rankImage.source=RES.getRes("rank"+t.id+"_png")):(this.rankLabel.text=t.id.toString(),this.rankImage.visible=!1),this.nameLabel.text=e.Utils.getMaxStr(t.nickname.toString()),this.scoreLabel.text=t.total_score||"0",this.helpLabel.text=t.ass_num||"0"):(this.zhuliGroup.visible=!0,this.ptGroup.visible=!1,this.zhuliNameLabel.text=e.Utils.getMaxStr(t.nickname),this.zhuliScoreLabel.text=t.ass_score||"0",this.zhuliCountLabel.text=t.ass_num||"0")},i}(eui.ItemRenderer);e.WidgetRankItem=t,egret.registerClass(t,"game.WidgetRankItem")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){var e=RES.getRes("screenani_json"),t=RES.getRes("screenani_png"),i=new egret.MovieClipDataFactory(e,t),n=new egret.MovieClip(i.generateMovieClipData("rote"));this.addChild(n),n.play(-1),this.anchorOffsetX=n.width/2,this.anchorOffsetY=n.height/2,this.mcDataFactory=i,this.moveClip=n},t}(egret.Sprite);e.WidgetScreenAni=t,egret.registerClass(t,"game.WidgetScreenAni")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.skinName=new WidgetStageSkin}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this),this.randomWidth()},n.randomWidth=function(){var e=_.random(60,99);this.stageImage.scaleX=parseFloat((e/100).toFixed(2))},n.fadeFgImage=function(e){egret.Tween.get(this.fgImage).to({alpha:e},2e3)},t}(eui.Panel);e.WidgetStage=t,egret.registerClass(t,"game.WidgetStage")}(game||(game={}));var game;!function(e){var t=function(e){function t(){e.call(this),this.speed=0,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this.stageH=egret.MainContext.instance.stage.stageHeight,this.stageW=egret.MainContext.instance.stage.stageWidth,this.growRate=.05;var e=new egret.Bitmap;e.texture=RES.getRes("stick_png"),this.addChild(e),this.stickSprite=e,this.anchorOffsetX=e.width,this.anchorOffsetY=e.height,this.scaleY=0;var t=new egret.Timer(1e3/60,0);t.addEventListener(egret.TimerEvent.TIMER,this.growHeight,this),this.timer=t},n.growHeight=function(){this.scaleY>=2||(this.speed+=this.growRate,this.scaleY+=.02*this.speed)},n.addSpeed=function(){this.growRate>=.2||(this.growRate+=.005)},t}(egret.Sprite);e.WidgetStick=t,egret.registerClass(t,"game.WidgetStick")}(game||(game={}));var Main=function(e){function t(){e.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){if(e.prototype.createChildren.call(this),egret.Capabilities.isMobile){this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH,this.stage.orientation=egret.OrientationMode.PORTRAIT;var t=this.stage.stageHeight/this.stage.stageWidth;(1.40625>t||t>1.6)&&(this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL)}this.stage.dirtyRegionPolicy=egret.DirtyRegionPolicy.OFF;var i=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",i),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),this.appContainer=new game.AppContainer,this.addChild(this.appContainer),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},n.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},n.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},n.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},n.startCreateScene=function(){game.AppFacade.getInstance().startUp(this.appContainer),game.AppFacade.getInstance().sendNotification(Notifier.START_GAME)},t}(eui.UILayer);egret.registerClass(Main,"Main");